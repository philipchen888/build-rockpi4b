Build ubuntu-uefi sdcard image for rockpi4b:

-----------------------------------------------------------
Download Ubuntu iso.
-----------------------------------------------------------

cd ~/Downloads
wget https://cdimage.ubuntu.com/releases/plucky/release/ubuntu-25.04-latest-desktop-arm64.iso
wget https://cdimage.ubuntu.com/releases/noble/release/ubuntu-24.04.3-desktop-arm64.iso

cd ~/build-rockpi4b/ubuntu-uefi
Plugin usb3 stick to PC.
sudo ./mksdcard.sh
sudo mkfs.vfat /dev/sda1
sudo fdisk -l /dev/sda
sudo mount /dev/sda1 /mnt
sudo 7z x ~/Downloads/ubuntu-25.04-latest-desktop-arm64.iso -o/mnt && sync && sudo umount /mnt
Eject usb3 stick from PC.

Plugin NVMe-SSD to PC.
sudo ./mknvme.sh
sudo mkfs.ext4 /dev/sda1
sudo fdisk -l /dev/sda
Eject NVMe-SSD from PC.

------------------------------------------------------------------------
Install ubuntu from usb3 stick ubuntu iso to empty NVMe-SSD.
NOTE: To minimize EMI interference, put usb3 stick to rockpi4b bottom USB3 socket,
      Put keyboard mouse to rockpi4b top USB2 socket with USB2 extention cable.
------------------------------------------------------------------------

Plugin usb3 stick and NVMe-SSD to rockpi4b. Plugin ethernet cable to rockpi4b. Power on rockpi4b.

Double click Install Ubuntu LTS icon.
Erase disk and install Ubuntu.
Click Install now.
Contine till finished. Restart. Remove usb3 stick from rockpi4b.

Plugin NVMe-SSD to PC.
sudo fdisk -l /dev/sda
sudo e2label /dev/sda2 rootfs
sudo blkid /dev/sda1 ( write down UUID )
sudo blkid /dev/sda2 ( write down UUID )
sudo mount /dev/sda2 /mnt
sudo touch /mnt/boot/grub/grub.cfg
sudo vi /mnt/boot/grub/grub.cfg ( delete everything, add
set timeout=5
set default="Boot UUID"
set menu_color_normal=white/black
set menu_color_highlight=white/green
set root=(nvme0n1,gpt2)

menuentry "Boot UUID" {
    search --no-floppy --fs-uuid --set=root --hint='usb0,gpt2' --hint='mmcblk1,gpt2' --hint='nvme0n1,gpt2' f982c9ea-37c2-47fe-b1f1-eae807358602
    echo    'Loading Linux 6.14.0-33-generic ...'
    linux /boot/vmlinuz-6.14.0-33-generic root=LABEL=rootfs rootwait rw rootdelay=10
    echo    'Loading initial ramdisk ...'
    initrd /boot/initrd.img-6.14.0-33-generic
}
)
cd
sync
sudo umount /mnt
Eject NVMe-SSD from PC.

Disable power saving and screen saver.
sudo apt install net-tools openssh-server pulseaudio-utils
sudo ifconfig
df .
uname -a
lsb_release -a
date
sudo apt update
sudo apt upgrade
sudo apt dist-upgrade
sync
free
Check if Ubuntu is running UEFI mode:
ls /sys/firmware/efi

sudo apt install flex bison libelf-dev libssl-dev build-essential libncurses-dev git speedtest-cli glmark2-es2-wayland mpv ffmpeg python3-pip python3-setuptools pandoc pavucontrol zip rfkill vsftpd vlc vlc-plugin-video-output

Install wifi bluetooth driver:
sudo vi /etc/vsftpd.conf  ( anonymous_enable=NO local_enable=YES write_enable=YES )
sudo systemctl restart vsftpd
Ftp ~/build-rockpi4b/ubuntu-uefi/packages/* to /lib/firmware/brcm
sync
sudo shutdown -h now

Remove ethernet cable from rockpi4b. Power on rockpi4b.
Setup wifi.
sudo ifconfig

speedtest-cli
glmark2-es2-wayland

aplay -l
pavucontrol  ( select hdmi as default )
sudo vi /etc/asound.conf ( add
pcm.!default {
type hw
card 0
}
ctl.!default {
type hw
card 0
}
)
sudo alsactl -F restore
sync
sudo shutdow -h now

Power on rockpi4b.
firefox -> youtube -> search YmDNhi07_Ho

git clone https://github.com/yt-dlp/yt-dlp.git
cd yt-dlp
make
cd ../
\rm -f swan.mp4
~/yt-dlp/yt-dlp -f "bestvideo[ext=mp4][vcodec^=avc1]+bestaudio[ext=m4a]/best" --merge-output-format mp4 --recode-video mp4 3qrKjywjo7Q -o swan.mp4
mpv swan.mp4
ffplay swan.mp4
cvlc --gl=wgl --glconv=any swan.mp4

sudo rfkill list
hciconfig hci0
hcitool dev
hciconfig -a
